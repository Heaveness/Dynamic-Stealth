CURRENTLY WORKING ON ===================================================

Improve LOS checks

Add "fear" AI task
...runs away from lastKnownPosition, or if that is somehow null, runs in a random direction
...constant threat drain (configurable), effect ends when threat hits 0
...damage does not change threat level while in this mode
...threat gauge appears purple

Add "unreachable target" mechanic...
...if the mob has threat, hasn't dealt damage lately, and either (has no target OR cannot reach its target), it changes behavior in a configurable way
...option to trigger fear effect
...option to trigger potion effects

Make passives use fear AI task and allow them to build threat to use for it

Add caching to AITargetEdit.isSuitableTarget()

Add potion effect for soul sight

Add indicator for where a mob WAS when you last saw it...
...show the mob, as it was last seen, but black and white with partial transparency
...make the on-point HUD above it into an X with coloration



BUG FIXES ==============================================================

Fix bug where mobs' body angle is sometimes wrong...
...when damaging a passive, after they move and turn once
...when trying to tame a horse by mounting it

Fix mobs in search mode periodically NOT doing the search, but going back to it later...
...noticed with spider, and so far I think it is specific to spiders?

Fix mobs not moving to last known position before searching when too far away...
...Create function which, when beyond normal pathfinding range...
...finds a partial path instead of a full path, and follows it...
...then if not at the final destination, finds another partial path and follows it...
...etc.
This system, if improved upon, could be used for most pathfinding and should improve pathfinding performance (by splitting it up and calculating parts at different times)


CONFIG =================================================================

Add config option for "Can See Through" Materials
Add config option for "Can See Through" Blocks

Add entity-specific configs for helper system



VISUAL INDICATORS ======================================================

Add touch detection indicator for players (see to do in DynamicStealth)

Add optional "damaged from" indicator, which draws an edge-of-screen arrow pointing the direction damage was recently received from

Add optional reticle which draws on focused entity (if there is one, and it is visible)

Add target locking (press button to lock/unlock on current target)

Add to HUD...
...light
...speed
...combined stealth multiplier?



AI =====================================================================

Can probably combine the two below into a single AI task...
...Replace EntityAILookIdle with a new version that has gradual head rotation, instead of just removing it
...Change "wandering" AI so that it can't instantly flip a 180 (force it to turn gradually before moving in the chosen direction)



SENSES =================================================================

Add sound-based detection
Apply stealth-based sound attributes

Add scent-based detection (wolves, cats, bears)
...Add the ability for entities to smell not only other living entities, but also ground items, etc.
Apply stealth-based scent attributes



ITEMS ==================================================================

Add a stealth guidebook

Add smoke bombs which block LOS

Add hand mirror, which allows you to peek around corners (changes camera position while in use, based on which hand it is in)

Add armor/baubles that improve stealth/anti-stealth attributes



MOBS ===================================================================

Ninjas...
...Ninjas try to use stealth mechanics
...Make ninjas sometimes disguise themselves as players who play on the server, but with slight typos in the nametag
...If they kill a player while disguised, it still says the player was killed by a ninja, to help prevent confused players raging at each other

Gray Men...
...Gray men are considered invisible if you are facing them directly
...When they were visible, but are no longer visible, stop sending updates to client, but *don't* tell client to remove them; this should cause an illusion that they are holding still



MUSIC ==================================================================

Possibly change music using ActualMusic when going into battle, etc



MOD COMPATIBILITY ======================================================

CNPCs don't change opacity

Figure out why the TF2 sentry gun constantly loses target with DS installed (if it's not in threat bypass mode)
Does having DS installed cause TF2 bullet streaks to not show?

Lycanite's Mobs can still attack through walls; probably using different LOS

Lycanite's Mobs have their own EntityAILookIdle which needs removing/replacing

Look into crash with Deadly Mobs and its haunted cows...
...https://paste.ee/p/gnVtK
...apparently haunted cows are also not supposed to look haunted until they get hit

Look into issue where "entities don't always notice you right away"...
...Epic Siege Mod
...Mo' Creatures
...I'm guessing this is probably due to a custom AI based on one of the vanilla AIs with a "chance" of seeing you
